<html>
	<body>
		<script type="text/javascript" src="js/gamepad.js"></script>
		<script type="text/javascript">
			window.onload = function()
			{
				var ws = new WebSocket("ws://" + location.host + ":");
			
				ws.onopen = function()	
				{
					console.log("Connection Opened");
				}

				ws.onmessage = function(message)
				{
					console.log(message);
					message = JSON.parse(message);
					console.log(message);
				}

				if(!Gamepad.init())
				{
					alert("Xbox Controller not Supported");
					console.log("Xbox Controller not Supported");
					return;
				}

				Gamepad.ondata = function(data)
				{
					ws.send(data.joystick[0].X + ":" + data.joystick[0].Y + ":" + data.joystick[1].X + ":" + data.joystick[1].Y);
				}
			}
		</script>
	</body>
</html>